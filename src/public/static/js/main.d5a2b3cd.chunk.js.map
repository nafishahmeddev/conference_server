{"version":3,"sources":["pages/Index.js","components/UserThumb.js","components/ChatScreen.js","pages/Room.js","App.js","reportWebVitals.js","index.js"],"names":["styles","display","alignItems","justifyContent","Index","props","useHistory","id","className","style","page","onSubmit","e","preventDefault","room","FormData","target","get","window","location","href","type","name","placeholder","required","UserThumb","stream","video_muted","audio_muted","self","onPinVideo","video_ref","useRef","useState","speaking","setSpeaking","useEffect","current","srcObject","play","muted","speechEvents","hark","on","console","log","onClick","size","color","alignSelf","ref","ChatScreen","onSendMessage","content","signaling","participants","messages","setMessages","objDiv","document","querySelector","scrollTop","scrollHeight","handleScrollToBottom","event","client","find","from","time","Date","removeAllListeners","map","message","toString","fd","reset","value","flexDirection","flex","debug","incoming","info","configuration","iceServers","urls","username","credential","Room","useParams","has_permission","setHasPermission","devices","setDevices","profile","setProfile","clients","_setClients","clients_ref","setClients","data","is_open_settings","setOpenSettings","is_open_thumbs","setOpenThumbs","is_open_chats","setOpenChats","setSignaling","pin_user","setPinUser","pin_video_ref","upsertUser","ob","email","removeUser","filter","getPear","user","peer","handlePinVideoChange","callBackOnJoin","a","pc","RTCPeerConnection","getTracks","forEach","track","addTrack","onicecandidate","ev","candidate","emit","to","onnegotiationneeded","createOffer","offer","setLocalDescription","localDescription","ontrack","streams","callBackOnOffer","setRemoteDescription","RTCSessionDescription","createAnswer","answer","initPermission","navigator","mediaDevices","getUserMedia","audio","video","initDevices","sources","enumerateDevices","then","dvcs","x","length","device","kind","push","err","alert","upsertProfile","update","tracks","t","stop","deviceId","exact","audio_tracks","video_tracks","concat","MediaStream","query","room_id","socket","io","process","initSocket","getSenders","sender","replaceTrack","addIceCandidate","RTCIceCandidate","Object","is","sercObject","backgroundImage","defaultValue","faker","findName","internet","label","disabled","getAudioTracks","enabled","getVideoTracks","variant","key","App","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","require","config","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.d5a2b3cd.chunk.js","sourcesContent":["import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nconst styles = {\n    \"page\":{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center'\n    }\n}\n\nfunction Index(props){\n    let history = useHistory();\n\n    return(\n        <div id=\"page\" className=\"room\" style={styles.page}>\n\n            <form onSubmit={e=>{\n                e.preventDefault();\n                let fd = new FormData(e.target);\n                let room = fd.get(\"room\");\n                window.location.href=\"/\"+room;\n            }} className=\"login-form\">\n                <h3>Create or join room</h3>\n                <div className=\"input-group\">\n                    <label>Room</label>\n                    <input type=\"text\" name=\"room\" placeholder=\"please enter room name\" required/>\n                </div>\n\n                <div className=\"input-group\">\n                    <button type=\"submit\">Join Now</button>\n                </div>\n            </form>\n        </div>\n    )\n\n\n}\nexport default Index\n","import {\n    IoEllipsisVerticalOutline,\n    IoMicOffOutline,\n    IoMicOutline,\n    IoPersonOutline,\n    IoVideocamOffOutline,\n    IoVideocamOutline\n} from \"react-icons/all\";\nimport React, {useEffect, useRef, useState} from \"react\";\n\nimport hark from \"hark\";\n\nexport default function UserThumb({id, stream, video_muted, audio_muted, name, self=false, onPinVideo=()=>{}}, props) {\n    const video_ref = useRef();\n    const [speaking, setSpeaking] = useState(false);\n    useEffect(()=>{\n        if(stream && video_ref.current) {\n            video_ref.current.srcObject = stream;\n            video_ref.current.play();\n            video_ref.current.muted = self;\n\n            if(!self) {\n                var options = {};\n                var speechEvents = hark(stream, options);\n\n                speechEvents.on('speaking', function () {\n                    setSpeaking(true);\n                });\n                speechEvents.on('stopped_speaking', function () {\n                    setSpeaking(false);\n                });\n            }\n        }\n\n        if(!self){\n            console.log(stream);\n        }\n    },[stream]);\n\n    useEffect(()=>{\n        if(speaking){\n            onPinVideo({id, stream, video_muted, audio_muted, name, self});\n        }\n    }, [speaking]);\n\n    useEffect(()=>{\n        return () => {\n            setSpeaking(null); // This worked for me\n        };\n    },[]);\n\n\n    return <div onClick={e=>!self?onPinVideo({stream, video_muted, audio_muted, name, self}):()=>{}}\n                className={`${speaking?\"speaking\":\"\"} user-thumb`}>\n        <header>\n            <button>\n                {video_muted?<IoVideocamOffOutline size={14} color=\"red\"/>:<IoVideocamOutline size={14}/>}\n            </button>\n            <button>\n                {audio_muted?<IoMicOffOutline color=\"red\" size={14}/>:<IoMicOutline size={14}/>}\n            </button>\n            <div></div>\n            {\n                !self&&<button style={{alignSelf:'flex-end'}}>\n                    <IoEllipsisVerticalOutline size={14}/>\n                </button>\n            }\n        </header>\n\n        <footer>\n            <span className=\"name\">\n                {name} {self && \"(me)\"}\n            </span>\n        </footer>\n\n        <video ref={video_ref}/>\n        <audio/>\n\n\n    </div>\n}\n","import {\n    IoEllipsisVerticalOutline,\n    IoMicOffOutline,\n    IoMicOutline,\n    IoVideocamOffOutline,\n    IoVideocamOutline\n} from \"react-icons/all\";\nimport React, {useEffect, useRef, useState} from \"react\";\n\n\nexport default function ChatScreen({id, stream, video_muted, audio_muted, name, self=false, onSendMessage=(content)=>{}, signaling, participants, style={}}, props) {\n    const [messages, setMessages] = useState([]);\n    const handleFormSubmit = (e) =>{\n        e.preventDefault();\n        const fd = new FormData(e.target);\n        const content = fd.get(\"content\");\n        const type = fd.get(\"type\");\n        onSendMessage(content, type);\n        e.target.reset();\n\n        setMessages([...messages, {type, content, name, self: true, time: new Date()}])\n    }\n\n    const handleScrollToBottom = () =>{\n        let objDiv = document.querySelector(\".chat-screen > .messages\");\n        if (objDiv) {\n            objDiv.scrollTop = objDiv.scrollHeight;\n        }\n    }\n\n    useEffect(()=>{\n        if(messages){\n            handleScrollToBottom();\n        }\n    }, [messages]);\n\n    useEffect(()=>{\n        signaling.on(\"message\", event=>{\n            let client = participants.find(client=>client.id===event.from);\n            if(client) {\n\n                setMessages([...messages, {\n                    ...event,\n                    self: false,\n                    time: new Date(),\n                    name: client.name\n                }]);\n            }\n        })\n\n        return function (){\n            signaling.removeAllListeners(\"message\");\n        }\n    })\n\n    return <div className=\"chat-screen\" style={style}>\n        <h3>Messages</h3>\n        <div className=\"messages\">\n            {\n                messages.map(message=><div className={`message ${message.self?\"self\":\"\"}`}>\n                    <span className=\"name\">{message.name}</span>\n                    {message.content}\n                    <span className=\"time\">{message.time.toString()}</span>\n                </div>)\n            }\n\n        </div>\n\n        <footer>\n            <form onSubmit={handleFormSubmit}>\n                <input type=\"text\" name=\"content\" placeholder=\"Please type a message\"/>\n                <input type=\"hidden\" value=\"plain/text\" name=\"type\"/>\n                <button type=\"submit\">Send</button>\n            </form>\n        </footer>\n    </div>\n}\n","import React, {useEffect, useRef, useState} from \"react\";\nimport {\n    IoCallOutline, IoChatboxOutline,\n    IoCloseOutline,\n    IoEllipsisVerticalOutline,\n    IoExitOutline,\n    IoMicOffOutline,\n    IoMicOutline,\n    IoPeopleOutline,\n    IoSettingsOutline,\n    IoVideocamOffOutline,\n    IoVideocamOutline,\n} from \"react-icons/all\";\nimport io from 'socket.io-client';\nimport UserThumb from \"./../components/UserThumb\";\nimport {\n    useParams\n} from \"react-router-dom\";\n\nimport faker from 'faker';\nimport ChatScreen from \"../components/ChatScreen\";\n\nconst styles = {\n    page:{\n        flexDirection:'column',\n        display: 'flex',\n        alignItems:\"center\",\n        justifyContent:'center'\n    },\n    content:{\n        flex: 1\n    },\n}\nconst debug = (incoming = true, message, id=\"\") =>{\n    id = id!==\"\"?`${incoming?\"from\":\"to\"} ${id}`: \"\";\n    console.info(incoming?\"%c ↓\":\"%c ↑\", `color: ${incoming?\"green\":\"red\"}`,  message, id );\n}\nconst configuration = {iceServers: [\n        {\n            urls: 'turn:34.224.213.192:3478',\n            username: 'xpeed',\n            credential:'xpeed123'\n        },\n    ]};\n///\nfunction Room(props){\n    const {room} = useParams();\n    const [has_permission, setHasPermission] = useState(false);\n    const [devices, setDevices] = useState(null);\n    const [profile, setProfile] = useState(null);\n    const [clients, _setClients] = useState([]);\n    const clients_ref = useRef([]);\n    const setClients = (data) =>{\n        clients_ref.current = data;\n        _setClients(data);\n    }\n\n    //\n    const [is_open_settings, setOpenSettings] = useState(false);\n    const [is_open_thumbs, setOpenThumbs] = useState(true);\n    const [is_open_chats, setOpenChats] = useState(false);\n\n    const [signaling, setSignaling] = useState(null);\n    const [pin_user, setPinUser] = useState({});\n\n    //references\n    const pin_video_ref = useRef();\n\n    //user function\n    const upsertUser = (id, data)=>{\n        if(clients_ref.current.find(ob=>ob.id===id)){\n            setClients(clients_ref.current.map(ob=>{\n                if(ob.id=== id)\n                    ob = {...ob, ...data}\n                return ob;\n            }));\n        } else {\n            data.name = data.name??\"\";\n            data.email = data.email??\"email\";\n            data.id = data.id??id;\n            setClients([...clients_ref.current, data]);\n        }\n    }\n    const removeUser = (id) =>{\n        setClients(clients_ref.current.filter(ob=>ob.id!==id));\n    }\n\n    //peer function\n    const getPear = (id) =>{\n        let user = clients_ref.current.find(ob=>ob.id===id) || {};\n        return user.peer?user.peer :null;\n    }\n\n    //handler\n    const handleToggleAudio = (muted) =>{\n        muted = !profile.audio_muted;\n        if(profile.stream) {\n            const tracks = profile.stream.getAudioTracks();\n            tracks[0].enabled = !muted;\n        }\n\n        setProfile({\n            ...profile,\n            audio_muted: muted\n        });\n\n        signaling.emit(\"audio_mute\", muted);\n    }\n    const handleToggleVideo = (muted) =>{\n        muted = !profile.video_muted;\n        if(profile.stream) {\n            const tracks = profile.stream.getVideoTracks();\n            tracks[0].enabled = !muted;\n        }\n        setProfile({\n            ...profile,\n            video_muted: muted\n        });\n        signaling.emit(\"video_mute\", muted);\n    }\n    const handlePinVideoChange = (user) =>{\n        if(pin_user.id!== user.id){\n            setPinUser(user);\n        }\n    }\n    const handleStreamChange = (user) =>{\n        clients_ref.current.forEach(client=>{\n            let pc = client.peer;\n            let tracks = profile.stream.getTracks();\n            let senders = pc.getSenders();\n            senders.forEach(async sender=>{\n                let track  = tracks.find(t=>t.kind===sender.track.kind);\n                await sender.replaceTrack(track);\n            });\n\n\n        })\n    };\n    const handleSendMessage = (content, type=\"plain/text\") =>{\n        signaling.emit(\"message\",{\n            content: content,\n            type: \"plain/text\"\n        });\n    }\n\n    //peer\n    let callBackOnJoin = async (id) => {\n        // ICE candidate configuration.\n        let pc = new RTCPeerConnection(configuration);\n        //sending my stream\n        profile.stream.getTracks().forEach((track) => pc.addTrack(track, profile.stream));\n        pc.onicecandidate = (ev) => {\n            if (!ev || !ev.candidate) return;\n            signaling.emit(\"candidate\", {\n                to: id,\n                candidate: ev.candidate\n            });\n            debug(false, \"candidate\", id);\n        }\n        //After peer connected\n        pc.onnegotiationneeded = async (ev) => {\n            const offer = await pc.createOffer()\n            await pc.setLocalDescription(offer);\n\n            signaling.emit(\"offer\", {\n                to: id,\n                offer: pc.localDescription\n            });\n\n            debug(false, \"offer\", id);\n\n        }\n        // After remote track media arrives, show it in remote video element.\n        pc.ontrack = (event) => {\n            upsertUser(id, {stream: event.streams[0]});\n            debug(true, \"stream\", id);\n        };\n        debug(false, \"offer\", id);\n        return pc;\n    }\n    let callBackOnOffer = async (id, offer) => {\n        // ICE candidate configuration.\n        let pc = new RTCPeerConnection(configuration);\n        //sending my stream\n        profile.stream.getTracks().forEach((track) => pc.addTrack(track, profile.stream));\n        // Let the \"negotiationneeded\" event trigger offer generation.\n        pc.onicecandidate = (ev) => {\n            if (!ev || !ev.candidate) return;\n            signaling.emit(\"candidate\", {\n                to: id,\n                candidate: ev.candidate\n            });\n            debug(false, \"candidate\", id);\n        }\n        pc.ontrack = (event) => {\n            // Don't set srcObject again if it is already set.\n            upsertUser(id, {stream:event.streams[0]});\n            debug(true, \"stream\", id);\n        };\n\n        await pc.setRemoteDescription(new RTCSessionDescription(offer));\n        await pc.setLocalDescription(await pc.createAnswer());\n        signaling.emit(\"answer\", {\n            to: id,\n            answer: pc.localDescription\n        });\n        debug(false, \"answer\", id);\n        return pc;\n    }\n\n\n    //init Permission\n    const initPermission = async (c=0) =>{\n        try{\n            let stream = await navigator.mediaDevices.getUserMedia({audio:true, video:true});\n            setHasPermission(true);\n        } catch (ex){\n            setHasPermission(false)\n        }\n    }\n    //init Devices\n    const initDevices = async () =>{\n        try {\n            let sources = {\n                video: [],\n                audio: []\n            };\n            navigator.mediaDevices.enumerateDevices().then( async  dvcs=>{\n                for(let x=0; x<dvcs.length; x++) {\n                    let info = dvcs[x];\n                    let device = {info};\n                    if (info.kind === \"audioinput\") {\n                        //device.stream = await navigator.mediaDevices.getUserMedia({audio:{deviceId: {exact: info.deviceId}}});\n                        sources.audio.push(device);\n                    }\n                    if (info.kind === \"videoinput\") {\n                        //device.stream = await navigator.mediaDevices.getUserMedia({video:{deviceId: {exact: info.deviceId}}});\n                        sources.video.push(device);\n                    }\n\n                }\n\n                setDevices(sources);\n            });\n        } catch (err) {\n            alert(err.message);\n        }\n    }\n    //upsertProfile\n    const upsertProfile = async (update) => {\n        let user = {};\n        if(profile){\n            user = profile;\n        } else {\n            user = {self: true};\n        }\n        user = {...user, ...update}\n        let tracks = [];\n        if(update.audio || update.video) {\n            if(profile){profile.stream.getTracks().forEach(t=>t.stop());}\n            let audio_tracks = (await navigator.mediaDevices.getUserMedia({audio: {deviceId: {exact: user.audio}}})).getTracks(); //devices.audio.find(i => i.info.deviceId === user.audio).stream.getAudioTracks();\n            let video_tracks = (await navigator.mediaDevices.getUserMedia({video: {deviceId: {exact: user.video}}})).getTracks();//devices.video.find(i => i.info.deviceId === user.video).stream.getVideoTracks();\n\n            tracks = tracks.concat(audio_tracks);\n            tracks = tracks.concat(video_tracks);\n\n            user.stream = new MediaStream(tracks);\n            user.audio_muted = false;\n            user.video_muted = false;\n        }\n\n\n\n        setProfile(user);\n\n        if(!profile){\n            setPinUser(user);\n        }\n\n    }\n    //initSocket\n    const initSocket = () =>{\n        const query = {\n            room_id: room,\n            name : profile.name\n        }\n        let socket = io(`${process.env.REACT_APP_API_URL}/conference`, {\n            query\n        });\n        setSignaling(socket);\n    }\n    //initSocketHandler\n    const initSocketHandler = () =>{\n        //adder handler\n        signaling.on(\"join\", async (event) => {\n            if (!event.id || !event.name) return;\n            let pc = await callBackOnJoin(event.id);\n            let user = {\n                id: event.id,\n                name: event.name,\n                peer: pc,\n            }\n            upsertUser(event.id, user);\n            debug(true, \"join\", event.id);\n        });\n        signaling.on(\"candidate\", async (event) => {\n            let pc = getPear(event.from);\n            if (!pc) return;\n            await pc.addIceCandidate(new RTCIceCandidate(event.candidate));\n            debug(true, \"candidate\", event.from);\n        });\n        signaling.on(\"answer\", async (event) => {\n            if (!event.from) return;\n            let pc = getPear(event.from);\n            if(!pc) return;\n            await pc.setRemoteDescription(new RTCSessionDescription(event.answer));\n            debug(true, \"answer\", event.from);\n        });\n\n        //joiner\n        signaling.on(\"offer\", async (event) => {\n            if (!event.from || !event.name) return;\n            debug(true, \"offer\", event.from);\n            let pc =  await callBackOnOffer(event.from, event.offer);\n            let user = {\n                id: event.from,\n                name: event.name,\n                peer: pc\n            }\n            upsertUser(event.from, user);\n        });\n\n        //both handler\n        signaling.on(\"audio_mute\", event=>{\n            upsertUser(event.id, {audio_muted:  event.muted})\n        })\n        signaling.on(\"video_mute\", event=>{\n            upsertUser(event.id, {video_muted:  event.muted})\n        })\n\n        signaling.on(\"detached\", async (id) => {\n            removeUser(id);\n        });\n        signaling.on(\"connect\", e => {\n            console.log(\"connected\");\n        })\n\n    }\n    //component hooks\n    useEffect(()=>{\n        if(!has_permission){\n            initPermission(0);\n        } else {\n            initDevices();\n        }\n    }, [has_permission]);\n\n    useEffect(()=>{\n        //init socket if profile exists\n        if(!signaling && profile) {\n            initSocket();\n        }\n\n        if(profile){\n            handleStreamChange();\n        }\n    }, [profile]);\n    useEffect(()=>{\n        if(signaling && profile){\n            initSocketHandler();\n            signaling.emit(\"join\");\n        }\n    },[signaling]);\n    useEffect(()=>{\n        if(pin_user && pin_user.stream && pin_video_ref.current){\n            if(!Object.is(pin_video_ref.current.sercObject, pin_user.stream )) {\n                pin_video_ref.current.srcObject = pin_user.stream;\n                pin_video_ref.current.play();\n                pin_video_ref.current.muted = true;\n            }\n        }\n    }, [pin_user]);\n    useEffect(()=>{\n        if(!clients.length && profile){\n            setPinUser(profile);\n        }\n    }, [clients])\n\n    if(!has_permission){\n        return <div id=\"page\" className=\"room\" style={{...styles.page,backgroundImage:'url(https://loremflickr.com/1080/720/black)'}}>\n            <div className=\"login-form\">\n                <h3>Permission required</h3>\n                <p>Need permission to continue.</p>\n            </div>\n        </div>\n    }\n\n    if(!devices){\n        return <div id=\"page\" className=\"room\" style={{...styles.page,backgroundImage:'url(https://loremflickr.com/1080/720/black)'}}>\n            <div className=\"login-form\">\n                <h3>Please wait..</h3>\n                <p>While loading devices</p>\n            </div>\n        </div>\n    }\n    if(devices && !profile){\n        return <>\n            <div id=\"page\" className=\"room\" style={{...styles.page,backgroundImage:'url(https://loremflickr.com/1080/720/black)'}}>\n\n                <form onSubmit={e=>{\n                    e.preventDefault();\n                    let fd = new FormData(e.target);\n                    let name = fd.get(\"name\");\n                    let email = fd.get(\"email\");\n                    let audio = fd.get(\"audio\");\n                    let video = fd.get(\"video\");\n\n                    upsertProfile({name, email, audio, video});\n                }} className=\"login-form\">\n                    <h3>Get Started</h3>\n                    <div className=\"input-group\">\n                        <label>Name</label>\n                        <input type=\"text\" name=\"name\" placeholder=\"please enter name\" required defaultValue={faker.name.findName()}/>\n                    </div>\n                    <div className=\"input-group\">\n                        <label>Email</label>\n                        <input type=\"email\" name=\"email\" placeholder=\"please enter email\" required defaultValue={faker.internet.email()}/>\n                    </div>\n\n                    <div className=\"input-group\">\n                        <label>Select video source</label>\n                        <select name=\"video\">\n                            {\n                                devices.video.map(device=>{\n                                    return <option  key={device.deviceId} value={device.info.deviceId}>{device.info.label}</option>\n                                })\n                            }\n                        </select>\n\n                    </div>\n\n                    <div className=\"input-group\">\n                        <label>Select audio source</label>\n                        <select name=\"audio\">\n                            {\n                                devices.audio.map(device=>{\n                                    return <option key={device.deviceId} value={device.info.deviceId}>{device.info.label}</option>\n                                })\n                            }\n                        </select>\n                    </div>\n\n                    <div className=\"input-group\">\n                        <label>Room</label>\n                        <input disabled type=\"text\" name=\"name\" placeholder=\"please enter name\" required defaultValue={room}/>\n                    </div>\n\n                    <div className=\"input-group\">\n                        <button type=\"submit\">Enter</button>\n                    </div>\n                </form>\n            </div>\n        </>\n    }\n\n    return(\n        <div id=\"page\" className=\"room\" style={styles.page}>\n            <div style={styles.content} className=\"content\">\n                <div className=\"pin-user-details\">\n                    <span>{pin_user.name} {pin_user.self?\"(you)\":\"\"}</span>\n                    <i></i>\n                </div>\n                <video ref={pin_video_ref}/>\n\n\n                <UserThumb {...profile} onPinVideo={handlePinVideoChange}/>\n\n\n            </div>\n            <div className=\"bottom\">\n\n                <div>\n                    <IoCallOutline size={16}/>\n                    <div>\n                        <span className=\"title\">You are in {room} room</span>\n                        <span>{clients.length} together with you</span>\n                    </div>\n                </div>\n\n                <button className={`${profile.audio_muted?'active':\"\"}`} onClick={handleToggleAudio}>\n                    {profile.audio_muted?<IoMicOffOutline size={20}/>:<IoMicOutline size={20}/>}\n                </button>\n\n                <button className={`${profile.video_muted?'active':\"\"}`} onClick={handleToggleVideo}>\n                    {profile.video_muted?<IoVideocamOffOutline size={20}/>:<IoVideocamOutline size={20}/>}\n                </button>\n                <button className={`${is_open_settings?'active':\"\"}`}\n                        onClick={e=>setOpenSettings(!is_open_settings)}>\n                    {is_open_settings?<IoCloseOutline size={20}/>: <IoSettingsOutline size={20}/>}\n\n                </button>\n\n                <button style={{display: \"none\"}} className={`${is_open_thumbs?'active':\"\"}`} onClick={e=>setOpenThumbs(!is_open_thumbs)}>\n                    {is_open_thumbs?<IoCloseOutline size={20}/>: <IoPeopleOutline size={20}/>}\n                </button>\n\n                <button className={`${is_open_chats?'active':\"\"}`} onClick={e=>setOpenChats(!is_open_chats)}>\n                    {is_open_chats?<IoCloseOutline size={20}/>: <IoChatboxOutline size={20}/>}\n                </button>\n\n                <button><IoEllipsisVerticalOutline size={20}/></button>\n\n                <button className={`drop-btn`} onClick={e=>window.location.href=\"/\"}><IoExitOutline size={20}/></button>\n            </div>\n            {\n                is_open_settings&&\n                <div className=\"settings-popup\">\n                    <div className=\"container\">\n                        <h3>Settings</h3>\n\n                        <form onSubmit={e=>{\n                            e.preventDefault();\n                            let fd = new FormData(e.target);\n                            let audio = fd.get(\"audio\");\n                            let video = fd.get(\"video\");\n\n                            upsertProfile({audio, video});\n                            setOpenSettings(false);\n                        }}>\n\n                            <div className=\"input-group\">\n                                <label>Select video source</label>\n                                <select name=\"video\" defaultValue={profile.video}>\n                                    {\n                                        devices.video.map(device=>{\n                                            return <option  key={device.deviceId} value={device.info.deviceId}>{device.info.label}</option>\n                                        })\n                                    }\n                                </select>\n\n                            </div>\n\n                            <div className=\"input-group\">\n                                <label>Select audio source</label>\n                                <select name=\"audio\" defaultValue={profile.audio}>\n                                    {\n                                        devices.audio.map(device=>{\n                                            return <option key={device.deviceId} value={device.info.deviceId}>{device.info.label}</option>\n                                        })\n                                    }\n                                </select>\n                            </div>\n\n                            <div className=\"input-group\">\n                                <div>\n                                    <button variant=\"danger\" type=\"button\" onClick={e=>setOpenSettings(false)}>Close</button>\n                                    <button type=\"submit\">Save</button>\n                                </div>\n                            </div>\n                        </form>\n\n                    </div>\n                </div>\n            }\n            {\n                is_open_thumbs&&\n                <div className=\"user-thumbs\">\n                    {\n                        clients.map(user=><UserThumb {...user} key={user.id}  onPinVideo={handlePinVideoChange} />)\n                    }\n                </div>\n            }\n\n            {signaling&&clients&&<ChatScreen style={{display:`${!is_open_chats?\"none\":\"inherit\"}`}} {...profile} onSendMessage={handleSendMessage} signaling={signaling} participants={clients} />}\n\n        </div>\n    )\n}\nexport default Room\n","import React from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\nimport Index from \"./pages/Index\";\nimport Room from \"./pages/Room\";\n\nfunction App() {\n  return (\n      <Router>\n          <Switch>\n              <Route path=\"/:room\" component={Room}/>\n              <Route path=\"/\" component={Index}/>\n          </Switch>\n      </Router>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/base.scss';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nif(process.env.NODE_ENV===\"development\"){\n    require('dotenv').config({ path: __dirname+'/../.env.development' })\n} else {\n    require('dotenv').config();\n}\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}